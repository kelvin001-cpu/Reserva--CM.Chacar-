<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTi - Sistema de Gest√£o Educacional</title>
    <style>
        :root { --blue-gov: #002d5e; --blue-light: #0056b3; --gold: #c5a059; --bg: #f4f7f6; }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { margin: 0; background: var(--bg); color: #333; }

        /* Header Padr√£o Prefeitura */
        header {
            background: var(--blue-gov); color: white; padding: 15px 5%;
            display: flex; align-items: center; justify-content: space-between;
            border-bottom: 5px solid var(--gold);
        }
        .logo-box { display: flex; align-items: center; gap: 15px; }
        .logo-box img { height: 50px; filter: brightness(0) invert(1); }
        
        .container { max-width: 900px; margin: 30px auto; padding: 0 20px; }
        .card { background: white; border-radius: 4px; padding: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        h2 { color: var(--blue-gov); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        
        /* Inputs e Bot√µes */
        .field { margin-bottom: 15px; }
        label { display: block; font-weight: 600; font-size: 13px; margin-bottom: 5px; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; }
        
        .btn { 
            background: var(--blue-light); color: white; border: none; padding: 15px 25px; 
            font-weight: bold; cursor: pointer; text-transform: uppercase; border-radius: 4px;
        }
        .btn:hover { background: var(--blue-gov); }

        /* Grid de Salas */
        .grid-rooms { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin: 15px 0; }
        .room-btn { background: #eee; border: 1px solid #ddd; padding: 10px; cursor: pointer; font-weight: 600; }
        .room-btn.active { background: var(--blue-gov); color: white; }

        /* Menu de Servi√ßos */
        .menu-options { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .opt-card { 
            border: 1px solid #ddd; padding: 20px; cursor: pointer; text-align: center;
            transition: 0.2s; background: white;
        }
        .opt-card:hover { border-color: var(--blue-light); transform: translateY(-3px); }
        .opt-card i { font-size: 30px; display: block; margin-bottom: 10px; }

        /* Cores de Gravidade */
        .grav-box { display: flex; gap: 10px; margin-bottom: 15px; }
        .grav-btn { flex: 1; padding: 10px; border: none; color: white; font-weight: bold; cursor: pointer; opacity: 0.4; }
        .grav-btn.active { opacity: 1; transform: scale(1.05); }

        .hidden { display: none; }
        .timer-val { font-size: 50px; font-weight: bold; color: var(--blue-gov); text-align: center; margin: 20px 0; }
    </style>
</head>
<body>

<header>
    <div class="logo-box">
        <img src="https://www.santanadeparnaiba.sp.gov.br/portal/img/brasao.png" alt="Bras√£o">
        <div>
            <h1 style="margin:0; font-size:18px;">NTi - EDUCA√á√ÉO</h1>
            <small>Santana de Parna√≠ba</small>
        </div>
    </div>
    <div id="user-tag" style="font-size: 12px;">Acesso Restrito</div>
</header>

<div class="container">
    
    <div id="scr-login" class="card">
        <h2>Acesso ao Portal</h2>
        <div class="field"><label>E-MAIL</label><input type="email" id="email"></div>
        <div class="field"><label>SENHA</label><input type="password" id="pass"></div>
        <button class="btn" onclick="go('perfil')">Entrar</button>
    </div>

    <div id="scr-perfil" class="card hidden">
        <h2>Dados do Professor</h2>
        <div class="field"><label>NOME COMPLETO</label><input type="text" id="p-nome"></div>
        <div class="field"><label>PRONTU√ÅRIO</label><input type="text" id="p-rp"></div>
        <div class="field"><label>MAT√âRIA</label><input type="text" id="p-mat"></div>
        <button class="btn" onclick="saveProfile()">Salvar Dados</button>
    </div>

    <div id="scr-menu" class="hidden">
        <h2>Servi√ßos NTi</h2>
        <div class="menu-options">
            <div class="opt-card" onclick="go('reserva')"><i>üìÖ</i><b>RESERVA</b><br><small>Equipamentos</small></div>
            <div class="opt-card" onclick="go('suporte')"><i>üõ†Ô∏è</i><b>SUPORTE</b><br><small>Chamado T√©cnico</small></div>
        </div>
    </div>

    <div id="scr-reserva" class="card hidden">
        <h2>Nova Reserva</h2>
        <label>Selecione a Sala:</label>
        <div class="grid-rooms" id="rooms-res"></div>
        <div class="field">
            <label>Equipamento:</label>
            <select id="res-item" onchange="toggleQtd(this.value)">
                <option value="Lab">Laborat√≥rio de Inform√°tica</option>
                <option value="Chrome">Chromebooks</option>
                <option value="TV">TV Interativa</option>
            </select>
        </div>
        <div id="qtd-box" class="field hidden"><label>Quantidade:</label><input type="number" id="res-qtd"></div>
        <div class="field"><label>Hor√°rio de Entrega:</label><input type="time" id="res-time"></div>
        <button class="btn" onclick="startBooking()">Confirmar Reserva</button>
        <button class="btn" style="background:#888" onclick="go('menu')">Voltar</button>
    </div>

    <div id="scr-timer" class="card hidden" style="text-align: center;">
        <h2>Uso em Andamento</h2>
        <div class="timer-val" id="timer-display">00:00</div>
        <p id="timer-info"></p>
        <button class="btn" style="background:#28a745" onclick="go('menu')">Finalizar Uso</button>
    </div>

    <div id="scr-suporte" class="card hidden">
        <h2>Abertura de Chamado</h2>
        <label>Sala da Ocorr√™ncia:</label>
        <div class="grid-rooms" id="rooms-sup"></div>
        <label>Gravidade:</label>
        <div class="grav-box">
            <button class="grav-btn" id="g-v" style="background:green" onclick="setG('Verde','g-v')">VERDE</button>
            <button class="grav-btn" id="g-a" style="background:orange" onclick="setG('Amarelo','g-a')">AMARELO</button>
            <button class="grav-btn" id="g-r" style="background:red" onclick="setG('Vermelho','g-r')">VERMELHO</button>
        </div>
        <div class="field"><label>Motivo:</label><textarea id="sup-motivo"></textarea></div>
        <button class="btn" onclick="sendTicket()">Enviar ao TI</button>
        <button class="btn" style="background:#888" onclick="go('menu')">Voltar</button>
    </div>

</div>

<script>
    let selRoom = ""; let selGrav = ""; let countdown;

    function go(id) {
        document.querySelectorAll('.container > div').forEach(d => d.classList.add('hidden'));
        document.getElementById('scr-'+id).classList.remove('hidden');
    }

    function saveProfile() {
        const nome = document.getElementById('p-nome').value;
        document.getElementById('user-tag').innerText = "Prof: " + nome;
        go('menu');
    }

    function buildRooms(id) {
        const box = document.getElementById(id);
        for(let i=1; i<=9; i++) {
            let b = document.createElement('button');
            b.className = 'room-btn'; b.innerText = i + '¬∫ ANO A';
            b.onclick = () => {
                document.querySelectorAll('.room-btn').forEach(x => x.classList.remove('active'));
                b.classList.add('active'); selRoom = b.innerText;
            };
            box.appendChild(b);
        }
    }

    function toggleQtd(v) { document.getElementById('qtd-box').classList.toggle('hidden', v !== 'Chrome'); }
    function setG(v, id) { selGrav = v; document.querySelectorAll('.grav-btn').forEach(b => b.classList.remove('active')); document.getElementById(id).classList.add('active'); }

    function startBooking() {
        const tFim = document.getElementById('res-time').value;
        if(!selRoom || !tFim) return alert("Selecione a Sala e o Hor√°rio!");
        go('timer');
        document.getElementById('timer-info').innerText = "Reserva ativa na " + selRoom;
        
        countdown = setInterval(() => {
            const now = new Date();
            const [h, m] = tFim.split(':');
            const target = new Date(); target.setHours(h, m, 0);
            const diff = target - now;

            if(diff <= 0) {
                clearInterval(countdown);
                document.getElementById('timer-display').innerText = "00:00";
                alert("Tempo esgotado! Devolva o equipamento.");
                return;
            }

            let min = Math.floor(diff/60000);
            let seg = Math.floor((diff%60000)/1000);
            document.getElementById('timer-display').innerText = `${min}:${seg.toString().padStart(2,'0')}`;
            if(min === 5 && seg === 0) alert("Aten√ß√£o: faltam 5 minutos para a entrega!");
        }, 1000);
    }

    function sendTicket() { alert("Chamado " + selGrav + " enviado com sucesso!"); go('menu'); }

    buildRooms('rooms-res');
    buildRooms('rooms-sup');
</script>

</body>
</html>
