<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISTEMA DE RESERVAS NTI</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --blue: #007bff; --dark: #0d1117; --glass: rgba(0,0,0,0.8); }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: #000 url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072') no-repeat center center fixed; background-size: cover; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        
        .card { width: 90%; max-width: 400px; background: var(--glass); backdrop-filter: blur(15px); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); text-align: center; }
        h2 { margin-bottom: 20px; font-size: 20px; color: #00adef; }
        
        input, select { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 10px; border: 1px solid #444; background: rgba(0,0,0,0.3); color: white; box-sizing: border-box; }
        
        .btn { width: 100%; padding: 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-bottom: 10px; transition: 0.3s; }
        .btn-blue { background: var(--blue); color: white; }
        .btn-outline { background: transparent; border: 1px solid white; color: white; }
        
        /* Grid do Menu */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .menu-item { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); cursor: pointer; }
        .menu-item:hover { background: var(--blue); border-color: #00ff9d; }
        
        .hidden { display: none; }
        #chat-box { height: 150px; background: rgba(0,0,0,0.2); border-radius: 10px; margin: 10px 0; overflow-y: auto; padding: 10px; font-size: 12px; text-align: left; }
    </style>
</head>
<body>

    <div class="card" id="app">
        <div id="screen-start">
            <h2>RESERVAS NTI</h2>
            <button class="btn btn-blue" onclick="show('screen-login')">Entrar</button>
            <button class="btn btn-outline" onclick="show('screen-register')">Novo Cadastro</button>
        </div>

        <div id="screen-login" class="hidden">
            <h2>LOGIN</h2>
            <input type="number" id="login-pront" placeholder="Prontu√°rio">
            <input type="password" id="login-pass" placeholder="Senha">
            <button class="btn btn-blue" onclick="auth.login()">Acessar</button>
            <p onclick="show('screen-start')" style="cursor:pointer; font-size:12px;">Voltar</p>
        </div>

        <div id="screen-register" class="hidden">
            <h2>CADASTRO</h2>
            <input type="text" id="reg-nome" placeholder="Nome Completo">
            <input type="number" id="reg-pront" placeholder="Prontu√°rio">
            <input type="text" id="reg-materia" placeholder="Mat√©ria">
            <input type="password" id="reg-pass" value="pmsp2026" placeholder="Defina uma Senha">
            <small style="display:block; margin-bottom:10px; font-size:10px;">Senha padr√£o: pmsp2026</small>
            <button class="btn btn-blue" onclick="auth.register()">Finalizar Cadastro</button>
            <p onclick="show('screen-start')" style="cursor:pointer; font-size:12px;">Cancelar</p>
        </div>

        <div id="screen-menu" class="hidden">
            <h2 id="user-name">Ol√°, Professor</h2>
            <div class="menu-grid">
                <div class="menu-item" onclick="alert('Reservar')">üìÖ<br>Reservas</div>
                <div class="menu-item" onclick="alert('Cronograma')">üïí<br>Cronograma</div>
                <div class="menu-item" style="grid-column: span 2;" onclick="alert('Chamado Suporte')">üõ†Ô∏è Suporte NTI</div>
            </div>
            
            <div id="chat-area">
                <div id="chat-box"></div>
                <input type="text" id="chat-in" placeholder="D√∫vida? Digite aqui..." style="margin-top:10px;">
            </div>
            <button onclick="location.reload()" style="background:none; border:none; color:gray; cursor:pointer; margin-top:15px;">Sair</button>
        </div>
    </div>

<script>
    // Configure com seus dados do Firebase
    const firebaseConfig = { databaseURL: "https://escala-chacara-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function show(id) {
        document.querySelectorAll('#app > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    const auth = {
        register() {
            const nome = document.getElementById('reg-nome').value;
            const pront = document.getElementById('reg-pront').value;
            const materia = document.getElementById('reg-materia').value;
            const pass = document.getElementById('reg-pass').value;

            if(nome && pront && pass) {
                db.ref('usuarios/professores/' + pront).set({ nome, pront, materia, pass })
                .then(() => { alert("Cadastro realizado!"); show('screen-login'); });
            } else { alert("Preencha tudo!"); }
        },

        login() {
            const pront = document.getElementById('login-pront').value;
            const pass = document.getElementById('login-pass').value;

            db.ref('usuarios/professores/' + pront).once('value', (snap) => {
                if(snap.exists() && snap.val().pass === pass) {
                    document.getElementById('user-name').innerText = "Prof. " + snap.val().nome;
                    show('screen-menu');
                } else { alert("Prontu√°rio ou senha inv√°lidos!"); }
            });
        }
    };
</script>
</body>
</html>
