<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema NTi - C.M. Ch√°cara Das Gar√ßas</title>
    <style>
        /* CSS - Identidade Visual Santana de Parna√≠ba */
        :root {
            --azul-gov: #002d5e;
            --azul-claro: #0056b3;
            --dourado: #c5a059;
            --fundo: #f4f7f6;
            --branco: #ffffff;
            --danger: #d9534f;
            --warning: #f0ad4e;
            --success: #5cb85c;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background: var(--fundo); color: #333; }
        .hidden { display: none !important; }

        header {
            background: var(--azul-gov);
            color: white;
            padding: 15px 5%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 5px solid var(--dourado);
        }

        .brasao-img { height: 60px; filter: brightness(0) invert(1); }

        .container { max-width: 900px; margin: 30px auto; padding: 20px; }

        .panel {
            background: var(--branco);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 5px solid var(--azul-claro);
        }

        h2 { color: var(--azul-gov); margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px; }

        /* Formul√°rios */
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }

        .btn {
            background: var(--azul-claro);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            border-radius: 4px;
            transition: 0.3s;
        }
        .btn:hover { background: var(--azul-gov); }

        /* Grid de Salas */
        .sala-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin: 15px 0; }
        .sala-btn {
            background: #eee; border: 1px solid #ddd; padding: 10px; text-align: center;
            cursor: pointer; font-size: 12px; font-weight: bold;
        }
        .sala-btn.active { background: var(--azul-gov); color: white; border-color: var(--azul-gov); }

        /* Menu Principal */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .menu-card {
            background: white; border: 1px solid #ddd; padding: 30px; text-align: center;
            cursor: pointer; transition: 0.3s; border-radius: 8px;
        }
        .menu-card:hover { transform: translateY(-5px); border-color: var(--azul-claro); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .menu-card i { font-size: 40px; display: block; margin-bottom: 10px; }

        /* Timer */
        #timer-display { font-size: 60px; font-weight: bold; color: var(--azul-gov); margin: 20px 0; }
        
        /* Suporte TI - Cores */
        .opt-verde { color: green; font-weight: bold; }
        .opt-amarelo { color: orange; font-weight: bold; }
        .opt-vermelho { color: red; font-weight: bold; }

    </style>
</head>
<body>

<header>
    <div style="display: flex; align-items: center; gap: 20px;">
        <img src="https://www.santanadeparnaiba.sp.gov.br/portal/img/brasao.png" class="brasao-img" alt="Bras√£o">
        <div>
            <h1 style="margin:0; font-size: 20px;">NTi - GEST√ÉO DE ATIVOS</h1>
            <small>C.M. Ch√°cara Das Gar√ßas</small>
        </div>
    </div>
    <div id="user-display" style="font-weight: bold; font-size: 14px;">Acesso Restrito</div>
</header>

<div class="container">

    <div id="tela-login" class="panel">
        <h2>Autentica√ß√£o</h2>
        <div class="form-group">
            <label>E-mail Institucional</label>
            <input type="email" id="login-email" placeholder="professor@educacao.sp.gov.br">
        </div>
        <div class="form-group">
            <label>Senha</label>
            <input type="password" id="login-pass" placeholder="******">
        </div>
        <button class="btn" onclick="proximaTela('tela-cadastro')">Acessar</button>
    </div>

    <div id="tela-cadastro" class="panel hidden">
        <h2>Identifica√ß√£o do Docente</h2>
        <div class="form-group">
            <label>Nome Completo</label>
            <input type="text" id="doc-nome">
        </div>
        <div style="display:flex; gap:10px;">
            <div class="form-group" style="flex:1;">
                <label>Prontu√°rio (RP)</label>
                <input type="text" id="doc-rp">
            </div>
            <div class="form-group" style="flex:1;">
                <label>Mat√©ria</label>
                <input type="text" id="doc-materia">
            </div>
        </div>
        <button class="btn" onclick="salvarPerfil()">Confirmar Dados</button>
    </div>

    <div id="tela-menu" class="hidden">
        <div class="menu-grid">
            <div class="menu-card" onclick="proximaTela('tela-reserva')">
                <i>üìÖ</i>
                <b>RESERVA DE EQUIPAMENTOS</b>
            </div>
            <div class="menu-card" onclick="proximaTela('tela-suporte')">
                <i>üõ†Ô∏è</i>
                <b>SUPORTE T√âCNICO (NTi)</b>
            </div>
        </div>
        <button class="btn" style="background:#666; margin-top:20px;" onclick="location.reload()">Sair</button>
    </div>

    <div id="tela-reserva" class="panel hidden">
        <h2>Nova Reserva</h2>
        <label>Selecione a Sala:</label>
        <div id="grade-salas-reserva" class="sala-grid"></div>

        <div class="form-group">
            <label>Equipamento:</label>
            <select id="res-equip" onchange="toggleChromebook()">
                <option value="TV Digital (Pat: 230180)">TV Digital (Pat: 230180)</option>
                <option value="Carrinho Chromebook (Pat: 247880)">Carrinho Chromebook (Pat: 247880)</option>
                <option value="Laborat√≥rio de Inform√°tica">Laborat√≥rio de Inform√°tica</option>
            </select>
        </div>

        <div id="campo-chrome" class="form-group hidden">
            <label>Quantidade de Chromebooks:</label>
            <input type="number" id="res-qtd" min="1" max="40" value="1">
        </div>

        <div class="form-group">
            <label>Hora da Devolu√ß√£o:</label>
            <input type="time" id="res-hora-fim">
        </div>

        <button class="btn" onclick="iniciarReserva()">Protocolar Reserva</button>
        <button class="btn" style="background:#999; margin-top:10px;" onclick="proximaTela('tela-menu')">Voltar</button>
    </div>

    <div id="tela-timer" class="panel hidden" style="text-align: center;">
        <h2>Equipamento em Uso</h2>
        <div id="timer-display">00:00</div>
        <p id="timer-info" style="font-weight: bold; color: #555;"></p>
        <button class="btn" style="background: var(--success);" onclick="finalizarUso()">Uso Finalizado / Devolvido</button>
    </div>

    <div id="tela-suporte" class="panel hidden">
        <h2>Abertura de Chamado</h2>
        <label>Local do Problema:</label>
        <div id="grade-salas-suporte" class="sala-grid"></div>

        <div class="form-group">
            <label>Gravidade:</label>
            <select id="sup-grau">
                <option value="Verde" class="opt-verde">üü¢ VERDE: Normal / Para depois</option>
                <option value="Amarelo" class="opt-amarelo">üü° AMARELO: Imediato / Sem urg√™ncia</option>
                <option value="Vermelho" class="opt-vermelho">üî¥ VERMELHO: URGENTE / Aula parada</option>
            </select>
        </div>

        <div class="form-group">
            <label>Descri√ß√£o do Problema:</label>
            <textarea id="sup-motivo" rows="4"></textarea>
        </div>

        <button class="btn" style="background: var(--danger);" onclick="enviarSuporte()">Registrar Chamado</button>
        <button class="btn" style="background:#999; margin-top:10px;" onclick="proximaTela('tela-menu')">Voltar</button>
    </div>

</div>

<script>
    let professor = {};
    let salaSelecionada = "";
    let contagemRegressiva;

    function proximaTela(id) {
        document.querySelectorAll('.panel, #tela-menu').forEach(t => t.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function salvarPerfil() {
        professor.nome = document.getElementById('doc-nome').value;
        professor.rp = document.getElementById('doc-rp').value;
        if(!professor.nome || !professor.rp) return alert("Preencha Nome e RP!");
        
        document.getElementById('user-display').innerText = "Prof: " + professor.nome;
        proximaTela('tela-menu');
    }

    function montarSalas(idContainer) {
        const container = document.getElementById(idContainer);
        container.innerHTML = "";
        for(let i=1; i<=9; i++) {
            let btn = document.createElement('div');
            btn.className = 'sala-btn';
            btn.innerText = i + "¬∫ ANO A";
            btn.onclick = () => {
                container.querySelectorAll('.sala-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                salaSelecionada = btn.innerText;
            };
            container.appendChild(btn);
        }
    }

    function toggleChromebook() {
        const equip = document.getElementById('res-equip').value;
        document.getElementById('campo-chrome').classList.toggle('hidden', !equip.includes("Chromebook"));
    }

    function iniciarReserva() {
        const horaFim = document.getElementById('res-hora-fim').value;
        if(!salaSelecionada || !horaFim) return alert("Selecione a sala e o hor√°rio de devolu√ß√£o!");

        const equip = document.getElementById('res-equip').value;
        proximaTela('tela-timer');
        document.getElementById('timer-info').innerText = `Equipamento: ${equip} | Local: ${salaSelecionada}`;
        
        // L√≥gica do Timer
        runTimer(horaFim);
    }

    function runTimer(horaFim) {
        if(contagemRegressiva) clearInterval(contagemRegressiva);
        
        contagemRegressiva = setInterval(() => {
            const agora = new Date();
            const [h, m] = horaFim.split(':');
            const target = new Date();
            target.setHours(h, m, 0);

            const diff = target - agora;

            if(diff <= 0) {
                document.getElementById('timer-display').innerText = "00:00";
                document.getElementById('timer-display').style.color = "red";
                alert("TEMPO ESGOTADO! Por favor, entregue o equipamento.");
                clearInterval(contagemRegressiva);
            } else {
                let minutos = Math.floor(diff / 60000);
                let segundos = Math.floor((diff % 60000) / 1000);
                document.getElementById('timer-display').innerText = 
                    `${minutos.toString().padStart(2,'0')}:${segundos.toString().padStart(2,'0')}`;
                
                if(minutos === 5 && segundos === 0) alert("Faltam 5 minutos para a entrega!");
            }
        }, 1000);
    }

    function finalizarUso() {
        clearInterval(contagemRegressiva);
        alert("Sistema Liberado. Obrigado por colaborar!");
        proximaTela('tela-menu');
    }

    function enviarSuporte() {
        const prioridade = document.getElementById('sup-prioridade').value;
        if(!salaSelecionada) return alert("Selecione a sala do problema!");
        alert("Chamado " + prioridade + " registrado com sucesso no NTi!");
        proximaTela('tela-menu');
    }

    // Iniciar
    montarSalas('grade-salas-reserva');
    montarSalas('grade-salas-suporte');
</script>

</body>
</html>
