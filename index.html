<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISTEMA NTi 2026 - KELVIN CENTRAL</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root { --verde: #00ff41; --fundo: #0d0d0d; --painel: #1a1a1a; --erro: #ff3333; }
        * { box-sizing: border-box; font-family: 'Courier Prime', monospace; }
        
        body { margin: 0; background: var(--fundo); color: var(--verde); display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        
        .caixa-sistema { width: 95%; max-width: 600px; background: var(--painel); border: 2px solid var(--verde); padding: 20px; box-shadow: 0 0 15px rgba(0, 255, 65, 0.2); }
        
        h2 { text-align: center; border-bottom: 1px solid var(--verde); padding-bottom: 10px; margin-top: 0; }
        
        .btn-menu { width: 100%; padding: 15px; margin: 5px 0; background: #000; color: var(--verde); border: 1px solid var(--verde); cursor: pointer; font-weight: bold; text-transform: uppercase; }
        .btn-menu:hover { background: var(--verde); color: #000; }
        
        .input-hack { width: 100%; padding: 12px; margin-bottom: 10px; background: #000; border: 1px solid #333; color: white; outline: none; }
        .input-hack:focus { border-color: var(--verde); }

        .hidden { display: none !important; }
        
        /* CARD DO USU√ÅRIO NO PAINEL TI */
        .card-user { border: 1px solid #333; padding: 10px; margin-bottom: 5px; background: #000; }
        .bloqueado { border-color: var(--erro); color: var(--erro); }

        .btn-ti-acao { padding: 5px 10px; margin-right: 5px; cursor: pointer; border: none; font-weight: bold; }
        .btn-reset { background: orange; color: black; }
        .btn-block { background: var(--verde); color: black; }
        .btn-del { background: var(--erro); color: white; }

        #overlay-congelado { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--erro); }
    </style>
</head>
<body onload="app.init()">

    <div id="overlay-congelado" class="hidden">
        <h1 style="font-size: 50px;">üö´</h1>
        <h2>ACESSO NEGADO</h2>
        <p>CONTA CONGELADA PELO T√âCNICO KELVIN</p>
        <button class="btn-menu" style="width: 200px; border-color: var(--erro); color: var(--erro);" onclick="location.reload()">SAIR</button>
    </div>

    <div class="caixa-sistema">
        <div id="relogio" style="text-align: right; font-size: 12px; margin-bottom: 10px;"></div>

        <div id="tela-inicio">
            <h2>SISTEMA NTi 2026</h2>
            <button class="btn-menu" onclick="app.abrirPortal('PROF')">PORTAL PROFESSOR</button>
            <button class="btn-menu" onclick="app.abrirPortal('GESTOR')">PORTAL GEST√ÉO</button>
            <button class="btn-menu" onclick="app.abrirPortal('SEC')">PORTAL SECRETARIA</button>
            <button class="btn-menu" style="border-color: var(--erro); color: var(--erro);" onclick="app.irPara('login-ti')">√ÅREA T√âCNICA (KELVIN)</button>
        </div>

        <div id="tela-login" class="hidden">
            <h2 id="titulo-login">LOGIN</h2>
            
            <p style="font-size: 12px;">DIGITE SEU PRONTU√ÅRIO:</p>
            <input type="number" id="inp-prontuario" class="input-hack" placeholder="Ex: 12345" onblur="app.verificarUsuario()">
            
            <div id="status-msg" style="margin-bottom: 10px; color: yellow; font-size: 12px; min-height: 15px;"></div>

            <div id="campos-cadastro" class="hidden">
                <input type="text" id="inp-nome" class="input-hack" placeholder="NOME COMPLETO">
                <input type="text" id="inp-materia" class="input-hack hidden" placeholder="MAT√âRIA (Ex: Rob√≥tica)">
            </div>

            <input type="password" id="inp-senha" class="input-hack" placeholder="SENHA">
            
            <button class="btn-menu" onclick="app.confirmarAcesso()">ENTRAR</button>
            <button class="btn-menu" style="border-color: #555; color: #555;" onclick="app.irPara('inicio')">VOLTAR</button>
        </div>

        <div id="tela-login-ti" class="hidden">
            <h2 style="color: var(--erro)">ACESSO TI MASTER</h2>
            <input type="password" id="ti-senha" class="input-hack" placeholder="SENHA MESTRA">
            <button class="btn-menu" style="border-color: var(--erro); color: var(--erro);" onclick="app.entrarTI()">ACESSAR SISTEMA</button>
            <button class="btn-menu" style="border-color: #555; color: #555;" onclick="app.irPara('inicio')">VOLTAR</button>
        </div>

        <div id="tela-menu-user" class="hidden">
            <h2 id="txt-user">BEM-VINDO</h2>
            <p>Status: <span style="color:var(--verde)">ONLINE</span></p>
            <button class="btn-menu" onclick="alert('Sistema de reservas em manuten√ß√£o...')">üìÖ FAZER RESERVA</button>
            <button class="btn-menu" style="border-color: #555;" onclick="location.reload()">SAIR</button>
        </div>

        <div id="tela-painel-ti" class="hidden">
            <h2>PAINEL DE CONTROLE</h2>
            <div style="margin-bottom: 15px;">
                <button class="btn-menu" style="background: #111;" onclick="app.irPara('reserva-ti')">üõ†Ô∏è RESERVAS T√âCNICAS</button>
            </div>
            
            <h3>USU√ÅRIOS CADASTRADOS:</h3>
            <div id="lista-usuarios" style="height: 300px; overflow-y: scroll; border: 1px solid #333; padding: 5px;"></div>
            
            <button class="btn-menu" style="margin-top: 15px;" onclick="app.irPara('inicio')">SAIR DO
