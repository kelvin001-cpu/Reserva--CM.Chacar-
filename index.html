<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEMA NTi - GEST√ÉO</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --azul-gov: #002d5e;
            --sky: #00adef;
            --neon: #00ff9d;
            --bg: #000b1a;
        }
        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        
        body { 
            margin: 0; background: var(--bg) url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2070&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover; min-height: 100vh; display: flex; align-items: center; justify-content: center; color: white; padding: 15px;
        }

        .glass-panel {
            width: 100%; max-width: 500px; background: rgba(0, 15, 35, 0.9);
            backdrop-filter: blur(25px); border: 1px solid rgba(0, 173, 239, 0.4); border-radius: 30px;
            padding: 30px; box-shadow: 0 50px 100px rgba(0,0,0,0.7);
            text-align: center; overflow: hidden; position: relative;
        }

        /* BARRA SUPERIOR */
        .header-top { border-bottom: 2px solid var(--sky); padding-bottom: 15px; margin-bottom: 20px; }
        .logo-nti { font-family: 'Orbitron'; font-size: 32px; color: #fff; letter-spacing: 3px; margin: 0; text-shadow: 0 0 15px var(--sky); }
        .sub-label { font-size: 9px; text-transform: uppercase; letter-spacing: 2px; color: var(--sky); font-weight: 700; }

        .clock-bar { font-family: 'Orbitron'; font-size: 11px; color: var(--neon); background: rgba(0,0,0,0.4); padding: 5px 15px; border-radius: 50px; display: inline-block; margin: 10px 0; border: 1px solid rgba(0, 255, 157, 0.2); }

        /* INPUTS MODERNOS */
        .login-box { display: flex; flex-direction: column; gap: 12px; }
        .input-group { text-align: left; }
        .input-group label { font-size: 10px; font-weight: 700; color: var(--sky); margin-left: 10px; text-transform: uppercase; }
        .input-main { width: 100%; height: 55px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 15px; padding: 0 20px; color: #fff; font-size: 15px; }
        .input-main:focus { background: rgba(255,255,255,0.1); border-color: var(--sky); outline: none; box-shadow: 0 0 15px rgba(0, 173, 239, 0.3); }

        /* MENU DASHBOARD */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        .card-menu { 
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px;
            padding: 20px; cursor: pointer; text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px;
        }
        .card-menu:hover { background: rgba(0, 173, 239, 0.15); border-color: var(--sky); transform: translateY(-5px); }
        .card-menu .icon { font-size: 30px; }
        .card-menu span { font-size: 12px; font-weight: 700; color: #fff; text-transform: uppercase; letter-spacing: 1px; }

        /* AGENDAMENTO ITEMS */
        .item-list { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn-select { 
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px;
            padding: 15px; color: #ccc; cursor: pointer; font-size: 11px; font-weight: 600;
        }
        .btn-select.active { background: var(--sky); color: #fff; border-color: #fff; box-shadow: 0 0 20px rgba(0, 173, 239, 0.5); }

        /* A√á√ÉO PRINCIPAL */
        .btn-action { 
            width: 100%; height: 60px; background: linear-gradient(135deg, var(--azul-gov), var(--sky)); 
            border: none; border-radius: 18px; color: #fff; font-weight: 800; text-transform: uppercase; 
            font-size: 15px; cursor: pointer; margin-top: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .btn-action:active { transform: scale(0.98); }

        .chrome-info { background: rgba(0, 173, 239, 0.08); padding: 15px; border-radius: 15px; border: 1px dashed var(--sky); margin: 15px 0; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="glass-panel">
        <div class="header-top">
            <h1 class="logo-nti">NTi</h1>
            <div class="sub-label">N√∫cleo de Tecnologia e Inova√ß√£o</div>
        </div>
        
        <div class="clock-bar" id="clock">00:00:00</div>

        <div id="scr1" class="login-box">
            <div class="input-group">
                <label>Nome do Docente</label>
                <input type="text" class="input-main" id="p-nome" placeholder="Ex: Jo√£o Silva">
            </div>
            <div class="input-group">
                <label>N¬∫ Prontu√°rio</label>
                <input type="text" class="input-main" id="p-id" placeholder="Digite seu RP">
            </div>
            <div class="input-group">
                <label>Mat√©ria / Disciplina</label>
                <input type="text" class="input-main" id="p-mat" placeholder="Ex: Matem√°tica">
            </div>
            <button class="btn-action" onclick="app.login()">Entrar no Dashboard</button>
        </div>

        <div id="scr2" class="hidden">
            <h2 style="font-size: 14px; opacity: 0.8;">BEM-VINDO AO PORTAL DE GEST√ÉO</h2>
            <div class="menu-grid">
                <div class="card-menu" onclick="app.nav(2, 3)">
                    <div class="icon">üìÖ</div>
                    <span>Reservas</span>
                </div>
                <div class="card-menu" onclick="app.nav(2, 5)">
                    <div class="icon">üõ†Ô∏è</div>
                    <span>Suporte</span>
                </div>
                <div class="card-menu" style="opacity: 0.5; cursor: default;">
                    <div class="icon">üìä</div>
                    <span>Relat√≥rios</span>
                </div>
                <div class="card-menu" onclick="location.reload()">
                    <div class="icon">üö™</div>
                    <span>Sair</span>
                </div>
            </div>
        </div>

        <div id="scr3" class="hidden">
            <h2 style="font-size: 14px;">NOVO AGENDAMENTO</h2>
            <div style="display:flex; gap:10px; margin-bottom: 15px;">
                <input type="time" class="input-main" id="res-inicio" style="flex:1">
                <input type="time" class="input-main" id="res-fim" style="flex:1">
            </div>
            <input type="text" class="input-main" id="res-sala" placeholder="Sala ou S√©rie">

            <label style="display:block; text-align:left; font-size:9px; color:var(--sky); margin:10px 0 5px 5px;">EQUIPAMENTO</label>
            <div class="item-list">
                <div class="btn-select" id="e1" onclick="app.setEq('LAB. INFO', 'e1')">üíª LAB. INFO</div>
                <div class="btn-select" id="e2" onclick="app.setEq('CHROMEBOOKS', 'e2')">üì± CHROMEBOOKS</div>
                <div class="btn-select" id="e3" onclick="app.setEq('TV 1', 'e3')">üì∫ TV 1¬∫ ANDAR</div>
                <div class="btn-select" id="e4" onclick="app.setEq('TV 2', 'e4')">üì∫ TV 2¬∫ ANDAR</div>
            </div>

            <div id="box-chrome" class="chrome-info hidden">
                <input type="number" class="input-main" id="res-qtd" placeholder="Qtd de Chromebooks">
                <textarea class="input-main" id="res-dev" style="height:80px; padding-top:10px; margin-top:10px;" placeholder="Desenvolvimento da aula..."></textarea>
            </div>

            <button class="btn-action" onclick="app.enviarReserva()">Salvar Agendamento</button>
            <button onclick="app.nav(3, 2)" style="background:none; border:none; color:#777; font-size:11px; margin-top:15px; cursor:pointer;">Voltar ao Menu</button>
        </div>

        <div id="scr5" class="hidden">
            <h2 style="font-size: 14px;">ABRIR CHAMADO NTi</h2>
            <div class="menu-grid" style="grid-template-columns: 1fr 1fr;">
                <div class="btn-select" id="g1" onclick="app.setGrau('NORMAL', 'g1')">üü¢ BAIXA</div>
                <div class="btn-select" id="g2" onclick="app.setGrau('URGENTE', 'g2')">üî¥ URGENTE</div>
            </div>
            <textarea class="input-main" id="sup-msg" style="height:120px; padding-top:15px; margin-top:15px;" placeholder="Descreva o problema t√©cnico..."></textarea>
            <button class="btn-action" onclick="app.enviarChamado()">Enviar para o Z√©</button>
            <button onclick="app.nav(5, 2)" style="background:none; border:none; color:#777; font-size:11px; margin-top:15px; cursor:pointer;">Cancelar</button>
        </div>
    </div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBoGfDKz-nBwKvczzGpxg-fHJYdVykcBUQ",
        databaseURL: "https://escala-chacara-default-rtdb.firebaseio.com",
        projectId: "escala-chacara",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const app = {
        equip: "", grau: "",
        nav(a, p) {
            document.querySelectorAll('.glass-panel > div[id]').forEach(d => d.classList.add('hidden'));
            document.getElementById(`scr${p}`).classList.remove('hidden');
        },
        login() {
            const n = document.getElementById('p-nome').value;
            const i = document.getElementById('p-id').value;
            const m = document.getElementById('p-mat').value;
            if(!n || !i || !m) return alert("ERRO: Identifica√ß√£o completa obrigat√≥ria!");
            this.nav(1, 2);
        },
        setEq(val, id) {
            this.equip = val;
            document.querySelectorAll('.btn-select').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            val === 'CHROMEBOOKS' ? document.getElementById('box-chrome').classList.remove('hidden') : document.getElementById('box-chrome').classList.add('hidden');
        },
        setGrau(val, id) {
            this.grau = val;
            document.querySelectorAll('#scr5 .btn-select').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        },
        enviarReserva() {
            const dados = {
                nome: document.getElementById('p-nome').value,
                rp: document.getElementById('p-id').value,
                materia: document.getElementById('p-mat').value,
                sala: document.getElementById('res-sala').value,
                item: this.equip,
                periodo: `${document.getElementById('res-inicio').value} - ${document.getElementById('res-fim').value}`,
                quantidade: document.getElementById('res-qtd').value || "1",
                aula: document.getElementById('res-dev').value || "Uso padr√£o",
                data: new Date().toLocaleString()
            };
            if(!dados.item || !dados.sala) return alert("Preencha os detalhes da reserva!");
            db.ref('Agendamentos_NTi').push(dados).then(() => { alert("REGISTRADO!"); location.reload(); });
        },
        enviarChamado() {
            const dados = {
                nome: document.getElementById('p-nome').value,
                rp: document.getElementById('p-id').value,
                materia: document.getElementById('p-mat').value,
                prioridade: this.grau,
                relato: document.getElementById('sup-msg').value,
                data: new Date().toLocaleString()
            };
            if(!dados.relato) return alert("Descreva o problema!");
            db.ref('Chamados_Tecnicos').push(dados).then(() => { alert("ENVIADO!"); location.reload(); });
        }
    };

    setInterval(() => {
        document.getElementById('clock').innerText = new Date().toLocaleTimeString();
    }, 1000);
</script>
</body>
</html>
