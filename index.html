<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISTEMA NTI | Conect Inovação</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #00adef; --bg-sidebar: rgba(0, 0, 0, 0.95);
            --bg-card: rgba(15, 23, 42, 0.8); --text-dim: rgba(255,255,255,0.7);
        }

        body { 
            margin: 0; font-family: 'Poppins', sans-serif; 
            background: #000 url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072') no-repeat center center fixed;
            background-size: cover; color: white; height: 100vh; display: flex; overflow: hidden;
        }

        /* --- MENU LATERAL (ESTILO SUA FOTO) --- */
        nav {
            width: 260px; background: var(--bg-sidebar); height: 100%;
            border-right: 1px solid rgba(255,255,255,0.1); padding: 30px 20px;
            display: flex; flex-direction: column; gap: 10px; box-sizing: border-box;
        }

        .brand { color: var(--primary); font-weight: 700; font-size: 20px; margin-bottom: 40px; padding-left: 10px; }
        .brand span { display: block; font-size: 10px; color: white; opacity: 0.6; }

        .nav-item {
            padding: 15px 20px; border-radius: 12px; cursor: pointer;
            display: flex; align-items: center; gap: 15px; transition: 0.3s;
            color: var(--text-dim); font-weight: 500; font-size: 14px;
        }
        .nav-item i { width: 20px; font-size: 18px; }
        .nav-item:hover, .nav-item.active { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(0, 173, 239, 0.3); }
        
        .btn-sair { margin-top: auto; border: 1px solid rgba(255,71,87,0.3); color: #ff4757; }
        .btn-sair:hover { background: #ff4757; color: white; }

        /* --- ÁREA PRINCIPAL --- */
        main { flex: 1; padding: 40px; overflow-y: auto; background: rgba(0,0,0,0.2); backdrop-filter: blur(5px); }
        
        h2 { font-size: 28px; font-weight: 600; margin-bottom: 30px; }

        /* --- CARDS DE EQUIPAMENTOS (ESTILO FOTO 4) --- */
        .equip-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .equip-card {
            background: var(--bg-card); border-radius: 20px; padding: 25px;
            text-align: center; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s;
        }
        .equip-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .equip-card h3 { font-size: 16px; margin: 0 0 20px 0; letter-spacing: 1px; }
        
        .btn-agendar {
            background: var(--primary); color: white; border: none; width: 100%;
            padding: 12px; border-radius: 8px; font-weight: 600; cursor: pointer;
        }

        /* --- CHAT INTEGRADO --- */
        .chat-container {
            background: var(--bg-card); border-radius: 20px; height: 500px;
            display: flex; flex-direction: column; border: 1px solid rgba(255,255,255,0.1);
        }
        #chat-window { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px 15px; border-radius: 15px; font-size: 13px; max-width: 70%; }
        .msg.me { background: var(--primary); align-self: flex-end; }
        .msg.other { background: rgba(255,255,255,0.1); align-self: flex-start; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <nav id="sidebar" class="hidden">
        <div class="brand">SISTEMA NTI <span>CONECT INOVAÇÃO</span></div>
        
        <div class="nav-item active" onclick="app.show('view-inicio')"><i class="fa fa-home"></i> Início</div>
        <div class="nav-item" onclick="app.show('view-reservas')"><i class="fa fa-calendar-alt"></i> Reservas</div>
        <div class="nav-item" onclick="app.show('view-suporte')"><i class="fa fa-tools"></i> Suporte TI</div>
        <div class="nav-item" onclick="app.show('view-chat')"><i class="fa fa-comments"></i> Chat Geral</div>
        
        <div class="nav-item btn-sair" onclick="location.reload()"><i class="fa fa-sign-out-alt"></i> SAIR</div>
    </nav>

    <main id="main-content" class="hidden">
        
        <div id="view-reservas" class="content-section">
            <h2>Reserva de Equipamentos</h2>
            <div class="equip-grid">
                <div class="equip-card">
                    <h3>TV SMART 01</h3>
                    <button class="btn-agendar" onclick="app.agendar('TV 01')">AGENDAR</button>
                </div>
                <div class="equip-card">
                    <h3>TV SMART 02</h3>
                    <button class="btn-agendar" onclick="app.agendar('TV 02')">AGENDAR</button>
                </div>
                <div class="equip-card">
                    <h3>CARRINHO CHROME</h3>
                    <button class="btn-agendar" onclick="app.agendar('Chrome')">AGENDAR</button>
                </div>
                <div class="equip-card">
                    <h3>SALA DE INFO</h3>
                    <button class="btn-agendar" onclick="app.agendar('Sala Info')">AGENDAR</button>
                </div>
            </div>
        </div>

        <div id="view-chat" class="content-section hidden">
            <h2>Chat Geral Docente</h2>
            <div class="chat-container">
                <div id="chat-window"></div>
                <div style="padding: 20px; display: flex; gap: 10px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <input type="text" id="msg-input" placeholder="Digite sua mensagem..." style="flex:1; padding:12px; border-radius:8px; background:rgba(0,0,0,0.3); border:1px solid #444; color:white;">
                    <button onclick="app.enviarMsg()" style="background:var(--primary); border:none; border-radius:8px; padding:0 20px; color:white; cursor:pointer;">➔</button>
                </div>
            </div>
        </div>
    </main>

    <div id="login-screen" style="width:100%; display:flex; align-items:center; justify-content:center;">
        <div style="background:rgba(0,0,0,0.8); padding:40px; border-radius:25px; border:1px solid rgba(255,255,255,0.1); width:400px; text-align:center; backdrop-filter:blur(15px);">
            <h1 style="margin-bottom:10px;">NTI MASTER 2026</h1>
            <p style="color:var(--primary); font-size:12px; letter-spacing:2px; margin-bottom:30px;">ACESSO PROFESSOR</p>
            <input type="number" id="l-pront" placeholder="Seu Prontuário" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.3); color:white;">
            <input type="password" id="l-pass" placeholder="Sua Senha" style="width:100%; padding:15px; margin-bottom:20px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.3); color:white;">
            <button onclick="app.login()" style="width:100%; padding:15px; background:var(--primary); border:none; border-radius:10px; color:white; font-weight:700; cursor:pointer;">ENTRAR</button>
        </div>
    </div>

<script>
    // Link do seu Firebase das fotos
    const firebaseConfig = { databaseURL: "https://escala-chacara-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const app = {
        user: { nome: "Kelvin" }, // Simulação por enquanto

        login() {
            // Lógica de login simples para pular para o painel
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('sidebar').classList.remove('hidden');
            document.getElementById('main-content').classList.remove('hidden');
            this.syncChat();
        },

        show(id) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            event.currentTarget.classList.add('active');
        },

        agendar(item) {
            const data = prompt("Qual a data e hora para " + item + "?");
            if(data) {
                db.ref('atividades').push({ 
                    prof: this.user.nome, 
                    equip: item, 
                    hora: data, 
                    registro: 'RESERVA',
                    timestamp: Date.now()
                });
                alert("Reserva de " + item + " enviada com sucesso!");
            }
        },

        enviarMsg() {
            const m = document.getElementById('msg-input').value;
            if(!m) return;
            db.ref('chat_geral').push({ nome: this.user.nome, msg: m });
            document.getElementById('msg-input').value = "";
        },

        syncChat() {
            db.ref('chat_geral').limitToLast(10).on('value', snap => {
                const win = document.getElementById('chat-window');
                win.innerHTML = "";
                snap.forEach(d => {
                    const me = d.val().nome === this.user.nome;
                    win.innerHTML += `<div class="msg ${me ? 'me' : 'other'}"><b>${d.val().nome}:</b> ${d.val().msg}</div>`;
                });
                win.scrollTop = win.scrollHeight;
            });
        }
    };
</script>
</body>
</html>
