<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Portal de Reservas - Chácara das Garças</title>
    <style>
        body { margin: 0; font-family: sans-serif; background: #f4f7f9; }
        header { background: linear-gradient(90deg, #1b4d6b, #2d88b4); color: white; padding: 20px; text-align: center; }
        .box { max-width: 400px; margin: 50px auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        input, select, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 25px; border: 1px solid #ddd; }
        button { background: #2d88b4; color: white; font-weight: bold; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <header><h1>RESERVA - CHÁCARA</h1></header>
    <div class="box" id="login">
        <h2>Identificação</h2>
        <input type="text" id="nome" placeholder="Seu Nome">
        <input type="text" id="pront" placeholder="Seu Prontuário">
        <button onclick="entrar()">ENTRAR</button>
    </div>
    <div class="box" id="reserva" style="display:none">
        <h2 id="msgErro" style="color:red; display:none">SISTEMA BLOQUEADO</h2>
        <div id="conteudo">
            <select id="item"><option>Tv Digital (230180)</option><option>Carrinho Chromebook (247880)</option></select>
            <input type="datetime-local" id="data">
            <button onclick="enviar()">RESERVAR AGORA</button>
        </div>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBoGfDKz-nBwKvczzGpxg-fHJYdVykcBUQ",
        authDomain: "escala-chacara.firebaseapp.com",
        databaseURL: "https://escala-chacara-default-rtdb.firebaseio.com",
        projectId: "escala-chacara",
        storageBucket: "escala-chacara.firebasestorage.app",
        messagingSenderId: "741259231706",
        appId: "1:741259231706:web:27e2b60be100e6a34180e3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    let n, p;

    window.entrar = () => {
        n = document.getElementById('nome').value; p = document.getElementById('pront').value;
        if(n && p) { document.getElementById('login').style.display='none'; document.getElementById('reserva').style.display='block'; }
    };

    onValue(ref(db, 'ativo'), (s) => {
        const ok = s.val() !== false;
        document.getElementById('conteudo').style.display = ok ? 'block' : 'none';
        document.getElementById('msgErro').style.display = ok ? 'none' : 'block';
    });

    window.enviar = () => {
        push(ref(db, 'reservas'), { prof: n, pront: p, item: document.getElementById('item').value, data: document.getElementById('data').value });
        alert("Sucesso!");
    };
</script>
</body>
</html>