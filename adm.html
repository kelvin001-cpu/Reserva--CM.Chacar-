<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>ADM - Chácara</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; padding: 20px; }
        .card { background: #2a2a2a; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        td, th { padding: 10px; border-bottom: 1px solid #444; }
    </style>
</head>
<body>
    <h1>Painel de Controle</h1>
    <div class="card">
        <button onclick="mudar(true)" style="background:green; color:white; padding:10px;">ATIVAR SITE</button>
        <button onclick="mudar(false)" style="background:red; color:white; padding:10px;">BLOQUEAR SITE</button>
    </div>
    <div class="card">
        <table>
            <thead><tr><th>Professor</th><th>Item</th><th>Data</th><th>Ação</th></tr></thead>
            <tbody id="lista"></tbody>
        </table>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBoGfDKz-nBwKvczzGpxg-fHJYdVykcBUQ",
        authDomain: "escala-chacara.firebaseapp.com",
        databaseURL: "https://escala-chacara-default-rtdb.firebaseio.com",
        projectId: "escala-chacara",
        storageBucket: "escala-chacara.firebasestorage.app",
        messagingSenderId: "741259231706",
        appId: "1:741259231706:web:27e2b60be100e6a34180e3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.mudar = (v) => set(ref(db, 'ativo'), v);
    window.apagar = (id) => remove(ref(db, 'reservas/' + id));

    onValue(ref(db, 'reservas'), (s) => {
        const lista = document.getElementById('lista'); lista.innerHTML = "";
        const dados = s.val();
        for(let id in dados) {
            lista.innerHTML += `<tr><td>${dados[id].prof}</td><td>${dados[id].item}</td><td>${dados[id].data}</td><td><button onclick="apagar('${id}')">OK</button></td></tr>`;
        }
    });
</script>
</body>
</html>